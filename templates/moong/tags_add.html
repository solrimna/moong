<div style="background: #f8f9fa; padding: 15px; border-radius: 5px;">
    <h4 style="margin-top: 0;">AI 추천 해시태그</h4>
    <p style="color: #666;">원하는 태그를 체크하거나 직접 추가하세요</p>
    
    <div id="tag-container">
        {% if tags %}
            {% for tag in tags %}
            <label style="display: inline-block; margin: 5px; padding: 8px 12px; background: #e7f3ff; border: 1px solid #007bff; border-radius: 20px;">
                <input type="checkbox" name="tags" value="{{ tag }}" checked>
                #{{ tag }}
            </label>
            {% endfor %}
        {% endif %}
    </div>

    <div style="margin-top: 15px; border-top: 1px solid #ddd; padding-top: 15px;">
        <input type="text" id="direct-tag-input" placeholder="직접 태그 입력 (예: 맛집)" 
               style="padding: 8px; border: 1px solid #ccc; border-radius: 5px; width: 200px;">
        <button type="button" id="add-tag-btn" 
                style="padding: 8px 15px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;">
            태그 추가
        </button>
    </div>
</div>

{# 자바스크립트 필요해서 넣었는데 공부 좀 할게여 아직 잘 몰라요... #}
<script>
    document.getElementById('add-tag-btn').addEventListener('click', function() {
        const input = document.getElementById('direct-tag-input');
        let tagValue = input.value.trim();

        if (tagValue) {
            // '#' 문자가 있으면 제거 (서버에서 일괄 처리하기 위함)
            tagValue = tagValue.replace(/^#/, '');

            const container = document.getElementById('tag-container');
            
            // 새로운 태그를 HTML 구조로 생성
            const newTag = `
                <label style="display: inline-block; margin: 5px; padding: 8px 12px; background: #fff3cd; border: 1px solid #ffc107; border-radius: 20px;">
                    <input type="checkbox" name="tags" value="${tagValue}" checked>
                    #${tagValue}
                </label>
            `;
            
            // 컨테이너에 추가
            container.insertAdjacentHTML('beforeend', newTag);
            
            // 입력창 초기화
            input.value = '';
            input.focus();
        } else {
            alert('태그 내용을 입력해주세요.');
        }
    });

    // 엔터키로도 추가 가능하게 만들기
    document.getElementById('direct-tag-input').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            e.preventDefault(); // 폼 제출 방지
            document.getElementById('add-tag-btn').click();
        }
    });
</script>